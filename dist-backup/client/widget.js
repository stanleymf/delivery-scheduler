import{r as o,w as n,j as e,k as M,l as E,m as k,T as j,n as _,o as $,B as x,P,p as R,C as O,s as u,x as f,v as W,h as z}from"./assets/calendar-CTJ57hz8.js";function B({shopDomain:l,productId:t,variantId:i}){var p;const[a,b]=o.useState(void 0),[r,m]=o.useState(""),[d,N]=o.useState("delivery"),[c,w]=o.useState(""),v=[{id:"morning",name:"Morning Delivery",type:"delivery",startTime:"10:00",endTime:"14:00",price:0,available:!0},{id:"afternoon",name:"Afternoon Delivery",type:"delivery",startTime:"14:00",endTime:"18:00",price:0,available:!0},{id:"evening",name:"Evening Delivery",type:"delivery",startTime:"18:00",endTime:"22:00",price:5,available:!0},{id:"express",name:"Express Delivery",type:"delivery",startTime:"11:00",endTime:"13:00",price:15,available:!0},{id:"collection",name:"Store Collection",type:"collection",startTime:"09:00",endTime:"21:00",price:-5,available:!0}],D=[n(new Date,1),n(new Date,2),n(new Date,3),n(new Date,4),n(new Date,5)],T=s=>D.some(y=>f(y).getTime()===f(s).getTime()),C=s=>{b(s),m("")},h=s=>{N(s),m("")},S=()=>a?v.filter(s=>s.type===d&&s.available):[],A=()=>{if(!a||!r)return;const s=v.find(I=>I.id===r);if(!s)return;const y={date:u(a,"yyyy-MM-dd"),timeSlot:s.name,type:s.type,postalCode:c,price:s.price};console.log("Delivery preference:",y),alert(`Added to cart with ${s.name} on ${u(a,"MMM dd, yyyy")}`)};return e.jsxs(M,{className:"w-full max-w-md mx-auto",children:[e.jsxs(E,{children:[e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-olive"}),"Delivery Options"]}),e.jsx(_,{children:"Choose your preferred delivery date and time"})]}),e.jsxs($,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Delivery Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:d==="delivery"?"default":"outline",size:"sm",onClick:()=>h("delivery"),className:"flex-1",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Delivery"]}),e.jsxs(x,{variant:d==="collection"?"default":"outline",size:"sm",onClick:()=>h("collection"),className:"flex-1",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Collection"]})]})]}),d==="delivery"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Postal Code"}),e.jsx("input",{type:"text",placeholder:"Enter postal code",value:c,onChange:s=>w(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-olive"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Date"}),e.jsx(R,{mode:"single",selected:a,onSelect:C,disabled:s=>!T(s),className:"rounded-md border"})]}),a&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Time"}),e.jsx("div",{className:"space-y-2",children:S().map(s=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${r===s.id?"border-olive bg-olive/10":"border-gray-200 hover:border-gray-300"}`,onClick:()=>m(s.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-olive"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[s.startTime," - ",s.endTime]}),e.jsx("div",{className:"text-sm font-medium",children:s.price>0?`+$${s.price}`:s.price<0?`-$${Math.abs(s.price)}`:"Free"})]})]})},s.id))})]}),a&&r&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Delivery Summary"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Date:"}),e.jsx("span",{children:u(a,"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Time:"}),e.jsx("span",{children:(p=v.find(s=>s.id===r))==null?void 0:p.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Type:"}),e.jsx("span",{className:"capitalize",children:d})]}),c&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Postal Code:"}),e.jsx("span",{children:c})]})]})]}),e.jsx(x,{onClick:A,disabled:!a||!r,className:"w-full bg-olive hover:bg-olive/90 text-olive-foreground",children:"Add to Cart with Delivery"}),e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Powered by Delivery Scheduler v1.0.0"})]})]})}function g(l){const t=l.containerId||"delivery-scheduler-widget",i=document.getElementById(t);if(!i){console.error(`Container with id "${t}" not found`);return}const a=W.createRoot(i);a.render(e.jsx(z.StrictMode,{children:e.jsx(B,{shopDomain:l.shopDomain,productId:l.productId,variantId:l.variantId})})),window.__deliverySchedulerRoots=window.__deliverySchedulerRoots||{},window.__deliverySchedulerRoots[t]=a}function L(l){const t=l||"delivery-scheduler-widget",i=window.__deliverySchedulerRoots||{};i[t]&&(i[t].unmount(),delete i[t])}window.DeliverySchedulerWidget={init:g,destroy:L};document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-delivery-scheduler]").forEach(t=>{const i={shopDomain:t.getAttribute("data-shop-domain")||"",productId:t.getAttribute("data-product-id")||void 0,variantId:t.getAttribute("data-variant-id")||void 0,containerId:t.id,theme:t.getAttribute("data-theme")||"light",locale:t.getAttribute("data-locale")||"en"};i.shopDomain&&g(i)})});
